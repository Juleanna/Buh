import{r as i,j as e,T as Y,C as f,R as k,b as s,S as b,D as j,B as D,t as I,E as M,F as v,m as x,d as q}from"./index-CSMAVB73.js";const{Title:S}=Y,{RangePicker:C}=j,T=()=>{var l,c;const[y,_]=i.useState([]),[o,d]=i.useState(!1),[n,h]=i.useState(null),p=()=>n?{date_from:n[0].format("YYYY-MM-DD"),date_to:n[1].format("YYYY-MM-DD")}:null,g=async()=>{var m,u;const t=p();if(!t){x.warning("Оберіть період");return}d(!0);try{const{data:r}=await q.get("/reports/turnover-statement/",{params:t});_(r)}catch(r){x.error(((u=(m=r.response)==null?void 0:m.data)==null?void 0:u.detail)||"Помилка завантаження звіту")}finally{d(!1)}},a=t=>Number(t).toLocaleString("uk-UA",{minimumFractionDigits:2}),w=[{title:"№ з/п",dataIndex:"index",key:"index",width:60},{title:"МВО",dataIndex:"responsible_person_name",key:"responsible_person_name",ellipsis:!0,width:160},{title:"Рахунок",dataIndex:"account_number",key:"account_number",width:100},{title:"Найменування",dataIndex:"name",key:"name",ellipsis:!0},{title:"Інв. номер",dataIndex:"inventory_number",key:"inventory_number",width:120},{title:"Од. виміру",dataIndex:"unit_of_measure",key:"unit_of_measure",width:90},{title:"Вартість",dataIndex:"cost",key:"cost",width:120,render:t=>a(t)},{title:"Залишок на початок",children:[{title:"к-ть",dataIndex:"opening_qty",key:"opening_qty",width:60},{title:"сума",dataIndex:"opening_amount",key:"opening_amount",width:120,render:t=>a(t)}]},{title:"Оборот дебет",children:[{title:"к-ть",dataIndex:"debit_qty",key:"debit_qty",width:60},{title:"сума",dataIndex:"debit_amount",key:"debit_amount",width:120,render:t=>a(t)}]},{title:"Оборот кредит",children:[{title:"к-ть",dataIndex:"credit_qty",key:"credit_qty",width:60},{title:"сума",dataIndex:"credit_amount",key:"credit_amount",width:120,render:t=>a(t)}]},{title:"Залишок на кінець",children:[{title:"к-ть",dataIndex:"closing_qty",key:"closing_qty",width:60},{title:"сума",dataIndex:"closing_amount",key:"closing_amount",width:120,render:t=>a(t)}]}];return e.jsxs("div",{children:[e.jsx(S,{level:4,children:"Оборотна відомість"}),e.jsx(f,{style:{marginBottom:16},children:e.jsxs(k,{gutter:16,align:"middle",children:[e.jsx(s,{children:e.jsxs(b,{children:[e.jsx("span",{children:"Період:"}),e.jsx(C,{value:n,onChange:t=>h(t),format:"DD.MM.YYYY"})]})}),e.jsx(s,{children:e.jsx(D,{type:"primary",icon:e.jsx(I,{}),onClick:g,loading:o,children:"Завантажити"})}),e.jsx(s,{children:e.jsx(M,{url:`/documents/turnover-statement/?date_from=${((l=n==null?void 0:n[0])==null?void 0:l.format("YYYY-MM-DD"))||""}&date_to=${((c=n==null?void 0:n[1])==null?void 0:c.format("YYYY-MM-DD"))||""}`,baseFilename:"turnover_statement",label:"Завантажити"})})]})}),e.jsx(v,{dataSource:y,columns:w,rowKey:"index",loading:o,pagination:!1,size:"small",bordered:!0,scroll:{x:1400}})]})};export{T as default};
