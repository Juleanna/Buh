{
  "version": 3,
  "sources": ["../../@antv/g6-extension-react/src/react-node/render18.ts"],
  "sourcesContent": ["import type * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport type { Root } from 'react-dom/client';\r\n\r\ntype ContainerType = (Element | DocumentFragment) & {\r\n  __rc_react_root__?: Root;\r\n};\r\n\r\nconst MARK = '__rc_react_root__';\r\n\r\nlet ReactDOMClientPromise: Promise<typeof import('react-dom/client') | null> | null = null;\r\n\r\n/**\r\n * <zh/> 初始化 React 18+ 的 createRoot\r\n *\r\n * <en/> Initialize React 18+ createRoot\r\n * @returns ReactDOMClient\r\n */\r\nfunction initReactDOMClient() {\r\n  if (ReactDOMClientPromise === null) {\r\n    ReactDOMClientPromise = import('react-dom/client').catch(() => null);\r\n  }\r\n  return ReactDOMClientPromise;\r\n}\r\n\r\n/**\r\n * <zh/> 切换警告\r\n *\r\n * <en/> Toggle warning\r\n * @param skip <zh/> 是否跳过警告 | <en/> Whether to skip the warning\r\n */\r\nfunction toggleWarning(skip: boolean) {\r\n  try {\r\n    const { __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED } = ReactDOM as typeof ReactDOM & {\r\n      __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED?: {\r\n        usingClientEntryPoint?: boolean;\r\n      };\r\n    };\r\n\r\n    if (\r\n      __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED &&\r\n      typeof __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED === 'object'\r\n    ) {\r\n      __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.usingClientEntryPoint = skip;\r\n    }\r\n  } catch {\r\n    // Silent error\r\n  }\r\n}\r\n\r\n/**\r\n * <zh/> 渲染 React 节点(React 18/19)\r\n *\r\n * <en/> Render React node(React 18/19)\r\n * @param node - <zh/> React 节点 | <en/> React node\r\n * @param container - <zh/> 容器 | <en/> Container\r\n */\r\nexport async function render(node: React.ReactNode, container: ContainerType) {\r\n  const client = await initReactDOMClient();\r\n  if (!client?.createRoot) {\r\n    throw new Error('React 18+ createRoot not available');\r\n  }\r\n\r\n  toggleWarning(true);\r\n  const root = container[MARK] || client.createRoot(container);\r\n  toggleWarning(false);\r\n\r\n  root.render(node);\r\n  container[MARK] = root;\r\n}\r\n\r\n/**\r\n * <zh/> 卸载 React 节点(React 18/19)\r\n *\r\n * <en/> Unmount React node(React 18/19)\r\n * @param container - <zh/> 容器 | <en/> Container\r\n * @returns <zh/> Promise | <en/> Promise\r\n */\r\nexport async function unmount(container: ContainerType) {\r\n  // Delay to unmount to avoid React 18 sync warning\r\n  return Promise.resolve().then(() => {\r\n    container[MARK]?.unmount();\r\n    delete container[MARK];\r\n  });\r\n}\r\n"],
  "mappings": ";;;;;;;;;AACA,eAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO1B,IAAM,OAAO;AAEb,IAAI,wBAAkF;AAQtF,SAAS,qBAAkB;AACzB,MAAI,0BAA0B,MAAM;AAClC,4BAAwB,OAAO,uBAAkB,EAAE,MAAM,MAAM,IAAI;EACrE;AACA,SAAO;AACT;AAQA,SAAS,cAAc,MAAa;AAClC,MAAI;AACF,UAAM,EAAE,mDAAkD,IAAK;AAM/D,QACE,sDACA,OAAO,uDAAuD,UAC9D;AACA,yDAAmD,wBAAwB;IAC7E;EACF,SAAE,IAAM;EAER;AACF;AASM,SAAgB,OAAO,MAAuB,WAAwB;;AAC1E,UAAM,SAAS,MAAM,mBAAkB;AACvC,QAAI,EAAC,WAAM,QAAN,WAAM,SAAA,SAAN,OAAQ,aAAY;AACvB,YAAM,IAAI,MAAM,oCAAoC;IACtD;AAEA,kBAAc,IAAI;AAClB,UAAM,OAAO,UAAU,IAAI,KAAK,OAAO,WAAW,SAAS;AAC3D,kBAAc,KAAK;AAEnB,SAAK,OAAO,IAAI;AAChB,cAAU,IAAI,IAAI;EACpB,CAAC;;AASK,SAAgB,QAAQ,WAAwB;;AAEpD,WAAO,QAAQ,QAAO,EAAG,KAAK,MAAK;;AACjC,OAAA,KAAA,UAAU,IAAI,OAAC,QAAA,OAAA,SAAA,SAAA,GAAE,QAAO;AACxB,aAAO,UAAU,IAAI;IACvB,CAAC;EACH,CAAC;;",
  "names": []
}
